2025-01-13 15:04:49,169 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:04:49,176 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/auth/login]
2025-01-13 15:04:49,176 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:04:49,176 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json', 'tenant-id': '422'}]
2025-01-13 15:04:49,176 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:04:49,176 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:04:49,176 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'username': 'sanya', 'password': 'jt123456'}]
2025-01-13 15:04:49,176 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'username': 'sanya', 'password': 'jt123456'}]
2025-01-13 15:04:49,177 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:04:49,177 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:04:49,564 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:04:49,564 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":{"userId":164,"accessToken":"d5f15f0e55b943f09eb44f39591270be","extendJson":"{\"tenantType\":\"1\",\"isMaster\":1,\"accountType\":3,\"tenantId\":\"422\",\"userId\":164,\"orgId\":\"1791366884432678912\",\"username\":\"sanya\"}","refreshToken":"6253894b17194a48ab302ad3a08cdb1c","expiresTime":1736787888731,"tenantId":422,"tenantName":"洁小兔（三亚）智洗工厂","tenantType":1,"orgId":"1791366884432678912","accountType":3},"msg":"成功","traceId":null}]
2025-01-13 15:04:49,564 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:04:49,564 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":{"userId":164,"accessToken":"e6b0d825fcb749ccb7f7c05a48f9d7bd","extendJson":"{\"tenantType\":\"1\",\"isMaster\":1,\"accountType\":3,\"tenantId\":\"422\",\"userId\":164,\"orgId\":\"1791366884432678912\",\"username\":\"sanya\"}","refreshToken":"4a1e19b15070415e96a9091e23101571","expiresTime":1736787888732,"tenantId":422,"tenantName":"洁小兔（三亚）智洗工厂","tenantType":1,"orgId":"1791366884432678912","accountType":3},"msg":"成功","traceId":null}]
2025-01-13 15:04:49,565 INFO [apiautotest] [conftest.py (logger_init:43) - 日志初始化成功]
2025-01-13 15:04:49,565 INFO [apiautotest] [conftest.py (logger_init:43) - 日志初始化成功]
2025-01-13 15:04:49,567 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:04:49,567 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/tcom/school/page?pageNo=1&pageSize=20]
2025-01-13 15:04:49,567 DEBUG [apiautotest] [client.py (send:25) - 接口method: get]
2025-01-13 15:04:49,567 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Authorization': 'Bearer  e6b0d825fcb749ccb7f7c05a48f9d7bd', 'tenant-id': '422', 'Content-Type': 'application/json'}]
2025-01-13 15:04:49,567 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:04:49,567 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:04:49,567 DEBUG [apiautotest] [client.py (send:29) - 接口json: None]
2025-01-13 15:04:49,567 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:04:49,685 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:04:49,685 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":{"list":[{"id":"1844296309490716672","orgId":"1791366884432678912","schoolName":"三亚理工职业学校","schoolType":3,"verifyType":0,"isHaveCard":2,"servceId":null,"servceName":null,"schoolAddress":"海南省三亚市吉阳区吉阳镇迎宾大道学院路三亚理工职业学院","schoolLonLat":"109.552098,18.337118","schoolRemark":"","createTime":1728549480000,"orgName":"洁兔组织","tenantName":"洁小兔（三亚）智洗工厂","updater":"sanya","updateTime":1728549480000,"thirdpartySchoolId":null},{"id":"1844296206726074368","orgId":"1791366884432678912","schoolName":"人大附中三亚学校","schoolType":1,"verifyType":0,"isHaveCard":2,"servceId":null,"servceName":null,"schoolAddress":"海南省三亚市海棠区林旺北路与龙江路交汇处东北侧人大附中三亚学校","schoolLonLat":"109.716074,18.341763","schoolRemark":"","createTime":1728549456000,"orgName":"洁兔组织","tenantName":"洁小兔（三亚）智洗工厂","updater":"sanya","updateTime":1728549456000,"thirdpartySchoolId":null},{"id":"1844295977717075968","orgId":"1791366884432678912","schoolName":"三亚双品学校","schoolType":1,"verifyType":0,"isHaveCard":2,"servceId":null,"servceName":null,"schoolAddress":"海南省三亚市天涯区羊新路165号三亚双品学校","schoolLonLat":"109.463215,18.292897","schoolRemark":"","createTime":1728549401000,"orgName":"洁兔组织","tenantName":"洁小兔（三亚）智洗工厂","updater":"sanya","updateTime":1728549401000,"thirdpartySchoolId":null}],"total":3},"msg":"成功","traceId":null}]
2025-01-13 15:04:49,892 INFO [apiautotest] [test_002-add_school.py (test_add_school:41) - 数据库中已有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}]]
2025-01-13 15:04:49,892 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:04:49,892 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/tcom/school/create]
2025-01-13 15:04:49,892 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:04:49,892 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Authorization': 'Bearer  d5f15f0e55b943f09eb44f39591270be', 'tenant-id': '422', 'Content-Type': 'application/json'}]
2025-01-13 15:04:49,893 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:04:49,893 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:04:49,893 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'schoolName': '测试学校', 'schoolType': 1, 'isHaveCard': 2, 'schoolAddress': '浙江省杭州市拱墅区石桥路与永华街交叉口滨江·春语蓝庭', 'schoolLonLat': '120.188966,30.346182'}]
2025-01-13 15:04:49,893 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:04:49,967 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:04:49,967 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":"1878699706037702656","msg":"成功","traceId":null}]
2025-01-13 15:04:50,090 INFO [apiautotest] [test_002-add_school.py (test_add_school:47) - 测试完成后数据库中有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}]]
2025-01-13 15:04:50,090 INFO [apiautotest] [test_002-add_school.py (test_add_school:52) - 删除测试数据sql：delete from tcom_school where school_name = "测试学校" and tenant_id = 422 and create_time >= "2025-01-13 15:04:49"]
2025-01-13 15:04:50,612 INFO [apiautotest] [test_002-add_school.py (test_add_school:41) - 数据库中已有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}]]
2025-01-13 15:04:50,613 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:04:50,613 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/tcom/school/create]
2025-01-13 15:04:50,613 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:04:50,614 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Authorization': 'Bearer  d5f15f0e55b943f09eb44f39591270be', 'tenant-id': '422', 'Content-Type': 'application/json'}]
2025-01-13 15:04:50,615 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:04:50,615 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:04:50,615 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'schoolName': '', 'schoolType': 1, 'isHaveCard': 2, 'schoolAddress': '浙江省杭州市拱墅区石桥路与永华街交叉口滨江·春语蓝庭', 'schoolLonLat': '120.188966,30.346182'}]
2025-01-13 15:04:50,616 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:04:50,671 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:04:50,672 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":400,"data":null,"msg":"请求参数不正确:学校名称不能为空","traceId":null}]
2025-01-13 15:04:50,750 INFO [apiautotest] [test_002-add_school.py (test_add_school:47) - 测试完成后数据库中有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}]]
2025-01-13 15:04:50,851 INFO [apiautotest] [test_002-add_school.py (test_add_school:41) - 数据库中已有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}]]
2025-01-13 15:04:50,852 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:04:50,852 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/tcom/school/create]
2025-01-13 15:04:50,852 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:04:50,852 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Authorization': 'Bearer  d5f15f0e55b943f09eb44f39591270be', 'tenant-id': '422', 'Content-Type': 'application/json'}]
2025-01-13 15:04:50,852 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:04:50,852 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:04:50,852 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'schoolName': '测试学校2', 'schoolType': 1, 'isHaveCard': 2, 'schoolAddress': '', 'schoolLonLat': '120.188966,30.346182'}]
2025-01-13 15:04:50,852 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:04:50,909 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:04:50,910 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":400,"data":null,"msg":"请求参数不正确:学校地址不能为空","traceId":null}]
2025-01-13 15:04:50,990 INFO [apiautotest] [test_002-add_school.py (test_add_school:47) - 测试完成后数据库中有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}]]
2025-01-13 15:04:51,089 INFO [apiautotest] [test_002-add_school.py (test_add_school:41) - 数据库中已有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}]]
2025-01-13 15:04:51,090 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:04:51,090 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/tcom/school/create]
2025-01-13 15:04:51,090 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:04:51,092 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Authorization': 'Bearer  d5f15f0e55b943f09eb44f39591270be', 'tenant-id': '422', 'Content-Type': 'application/json'}]
2025-01-13 15:04:51,092 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:04:51,092 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:04:51,092 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'schoolName': '测试学校3', 'schoolType': 1, 'isHaveCard': 2, 'schoolAddress': '浙江省杭州市拱墅区石桥路与永华街交叉口滨江·春语蓝庭', 'schoolLonLat': ''}]
2025-01-13 15:04:51,093 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:04:51,150 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:04:51,151 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":400,"data":null,"msg":"请求参数不正确:经纬度不能为空","traceId":null}]
2025-01-13 15:04:51,233 INFO [apiautotest] [test_002-add_school.py (test_add_school:47) - 测试完成后数据库中有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}]]
2025-01-13 15:47:33,853 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:47:33,853 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:47:33,853 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/tenant/get-id-by-name?name=liyang]
2025-01-13 15:47:33,853 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/tenant/get-id-by-name?name=sanya]
2025-01-13 15:47:33,853 DEBUG [apiautotest] [client.py (send:25) - 接口method: get]
2025-01-13 15:47:33,853 DEBUG [apiautotest] [client.py (send:25) - 接口method: get]
2025-01-13 15:47:33,853 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json'}]
2025-01-13 15:47:33,854 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json'}]
2025-01-13 15:47:33,854 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:47:33,854 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:47:33,854 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:47:33,854 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:47:33,854 DEBUG [apiautotest] [client.py (send:29) - 接口json: None]
2025-01-13 15:47:33,854 DEBUG [apiautotest] [client.py (send:29) - 接口json: None]
2025-01-13 15:47:33,854 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:47:33,854 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:47:34,192 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:47:34,192 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":421,"msg":"成功","traceId":null}]
2025-01-13 15:47:34,193 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:47:34,193 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:47:34,193 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/auth/login]
2025-01-13 15:47:34,193 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":422,"msg":"成功","traceId":null}]
2025-01-13 15:47:34,193 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:47:34,193 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json', 'tenant-id': {421}}]
2025-01-13 15:47:34,193 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:47:34,193 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:47:34,193 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/auth/login]
2025-01-13 15:47:34,193 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:47:34,193 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:47:34,193 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'username': 'liyang', 'password': 'jt123456'}]
2025-01-13 15:47:34,193 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json', 'tenant-id': {422}}]
2025-01-13 15:47:34,193 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:47:34,194 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:47:34,194 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:47:34,194 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'username': 'sanya', 'password': 'jt123456'}]
2025-01-13 15:47:34,194 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:47:34,194 ERROR [apiautotest] [client.py (send:45) - 接口发起失败]
Traceback (most recent call last):
  File "D:\PycharmProjects\apiobjectframework\common\client.py", line 34, in send
    self.resp = RequestsClient.session.request(method=self.method,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\python\Lib\site-packages\requests\sessions.py", line 575, in request
    prep = self.prepare_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\python\Lib\site-packages\requests\sessions.py", line 484, in prepare_request
    p.prepare(
  File "D:\python\Lib\site-packages\requests\models.py", line 368, in prepare
    self.prepare_headers(headers)
  File "D:\python\Lib\site-packages\requests\models.py", line 490, in prepare_headers
    check_header_validity(header)
  File "D:\python\Lib\site-packages\requests\utils.py", line 1042, in check_header_validity
    _validate_header_part(header, value, 1)
  File "D:\python\Lib\site-packages\requests\utils.py", line 1051, in _validate_header_part
    raise InvalidHeader(
requests.exceptions.InvalidHeader: Header part ({421}) from ('tenant-id', {421}) must be of type str or bytes, not <class 'set'>
2025-01-13 15:47:34,195 ERROR [apiautotest] [client.py (send:45) - 接口发起失败]
Traceback (most recent call last):
  File "D:\PycharmProjects\apiobjectframework\common\client.py", line 34, in send
    self.resp = RequestsClient.session.request(method=self.method,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\python\Lib\site-packages\requests\sessions.py", line 575, in request
    prep = self.prepare_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\python\Lib\site-packages\requests\sessions.py", line 484, in prepare_request
    p.prepare(
  File "D:\python\Lib\site-packages\requests\models.py", line 368, in prepare
    self.prepare_headers(headers)
  File "D:\python\Lib\site-packages\requests\models.py", line 490, in prepare_headers
    check_header_validity(header)
  File "D:\python\Lib\site-packages\requests\utils.py", line 1042, in check_header_validity
    _validate_header_part(header, value, 1)
  File "D:\python\Lib\site-packages\requests\utils.py", line 1051, in _validate_header_part
    raise InvalidHeader(
requests.exceptions.InvalidHeader: Header part ({422}) from ('tenant-id', {422}) must be of type str or bytes, not <class 'set'>
2025-01-13 15:47:34,689 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:47:34,689 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/tenant/get-id-by-name?name=sanya]
2025-01-13 15:47:34,689 DEBUG [apiautotest] [client.py (send:25) - 接口method: get]
2025-01-13 15:47:34,690 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json'}]
2025-01-13 15:47:34,690 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:47:34,690 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:47:34,690 DEBUG [apiautotest] [client.py (send:29) - 接口json: None]
2025-01-13 15:47:34,690 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:47:34,749 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:47:34,749 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":422,"msg":"成功","traceId":null}]
2025-01-13 15:47:34,749 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:47:34,749 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/auth/login]
2025-01-13 15:47:34,749 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:47:34,750 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json', 'tenant-id': {422}}]
2025-01-13 15:47:34,750 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:47:34,750 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:47:34,750 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'username': 'sanya', 'password': 'jt123456'}]
2025-01-13 15:47:34,751 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:47:34,752 ERROR [apiautotest] [client.py (send:45) - 接口发起失败]
Traceback (most recent call last):
  File "D:\PycharmProjects\apiobjectframework\common\client.py", line 34, in send
    self.resp = RequestsClient.session.request(method=self.method,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\python\Lib\site-packages\requests\sessions.py", line 575, in request
    prep = self.prepare_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\python\Lib\site-packages\requests\sessions.py", line 484, in prepare_request
    p.prepare(
  File "D:\python\Lib\site-packages\requests\models.py", line 368, in prepare
    self.prepare_headers(headers)
  File "D:\python\Lib\site-packages\requests\models.py", line 490, in prepare_headers
    check_header_validity(header)
  File "D:\python\Lib\site-packages\requests\utils.py", line 1042, in check_header_validity
    _validate_header_part(header, value, 1)
  File "D:\python\Lib\site-packages\requests\utils.py", line 1051, in _validate_header_part
    raise InvalidHeader(
requests.exceptions.InvalidHeader: Header part ({422}) from ('tenant-id', {422}) must be of type str or bytes, not <class 'set'>
2025-01-13 15:47:34,816 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:47:34,817 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/tenant/get-id-by-name?name=sanya]
2025-01-13 15:47:34,817 DEBUG [apiautotest] [client.py (send:25) - 接口method: get]
2025-01-13 15:47:34,817 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json'}]
2025-01-13 15:47:34,817 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:47:34,817 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:47:34,817 DEBUG [apiautotest] [client.py (send:29) - 接口json: None]
2025-01-13 15:47:34,817 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:47:34,898 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:47:34,898 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":422,"msg":"成功","traceId":null}]
2025-01-13 15:47:34,898 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:47:34,898 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/auth/login]
2025-01-13 15:47:34,898 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:47:34,898 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json', 'tenant-id': {422}}]
2025-01-13 15:47:34,898 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:47:34,898 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:47:34,898 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'username': 'sanya', 'password': 'jt123456'}]
2025-01-13 15:47:34,898 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:47:34,899 ERROR [apiautotest] [client.py (send:45) - 接口发起失败]
Traceback (most recent call last):
  File "D:\PycharmProjects\apiobjectframework\common\client.py", line 34, in send
    self.resp = RequestsClient.session.request(method=self.method,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\python\Lib\site-packages\requests\sessions.py", line 575, in request
    prep = self.prepare_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\python\Lib\site-packages\requests\sessions.py", line 484, in prepare_request
    p.prepare(
  File "D:\python\Lib\site-packages\requests\models.py", line 368, in prepare
    self.prepare_headers(headers)
  File "D:\python\Lib\site-packages\requests\models.py", line 490, in prepare_headers
    check_header_validity(header)
  File "D:\python\Lib\site-packages\requests\utils.py", line 1042, in check_header_validity
    _validate_header_part(header, value, 1)
  File "D:\python\Lib\site-packages\requests\utils.py", line 1051, in _validate_header_part
    raise InvalidHeader(
requests.exceptions.InvalidHeader: Header part ({422}) from ('tenant-id', {422}) must be of type str or bytes, not <class 'set'>
2025-01-13 15:47:34,974 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:47:34,974 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/tenant/get-id-by-name?name=sanya]
2025-01-13 15:47:34,974 DEBUG [apiautotest] [client.py (send:25) - 接口method: get]
2025-01-13 15:47:34,974 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json'}]
2025-01-13 15:47:34,974 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:47:34,974 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:47:34,974 DEBUG [apiautotest] [client.py (send:29) - 接口json: None]
2025-01-13 15:47:34,974 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:47:35,026 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:47:35,027 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":422,"msg":"成功","traceId":null}]
2025-01-13 15:47:35,027 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:47:35,028 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/auth/login]
2025-01-13 15:47:35,028 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:47:35,028 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json', 'tenant-id': {422}}]
2025-01-13 15:47:35,028 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:47:35,028 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:47:35,028 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'username': 'sanya', 'password': 'jt123456'}]
2025-01-13 15:47:35,029 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:47:35,029 ERROR [apiautotest] [client.py (send:45) - 接口发起失败]
Traceback (most recent call last):
  File "D:\PycharmProjects\apiobjectframework\common\client.py", line 34, in send
    self.resp = RequestsClient.session.request(method=self.method,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\python\Lib\site-packages\requests\sessions.py", line 575, in request
    prep = self.prepare_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\python\Lib\site-packages\requests\sessions.py", line 484, in prepare_request
    p.prepare(
  File "D:\python\Lib\site-packages\requests\models.py", line 368, in prepare
    self.prepare_headers(headers)
  File "D:\python\Lib\site-packages\requests\models.py", line 490, in prepare_headers
    check_header_validity(header)
  File "D:\python\Lib\site-packages\requests\utils.py", line 1042, in check_header_validity
    _validate_header_part(header, value, 1)
  File "D:\python\Lib\site-packages\requests\utils.py", line 1051, in _validate_header_part
    raise InvalidHeader(
requests.exceptions.InvalidHeader: Header part ({422}) from ('tenant-id', {422}) must be of type str or bytes, not <class 'set'>
2025-01-13 15:48:44,449 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:48:44,449 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/tenant/get-id-by-name?name=sanya]
2025-01-13 15:48:44,449 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/tenant/get-id-by-name?name=liyang]
2025-01-13 15:48:44,449 DEBUG [apiautotest] [client.py (send:25) - 接口method: get]
2025-01-13 15:48:44,449 DEBUG [apiautotest] [client.py (send:25) - 接口method: get]
2025-01-13 15:48:44,449 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json'}]
2025-01-13 15:48:44,449 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json'}]
2025-01-13 15:48:44,449 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:48:44,449 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:48:44,449 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:48:44,449 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:48:44,449 DEBUG [apiautotest] [client.py (send:29) - 接口json: None]
2025-01-13 15:48:44,449 DEBUG [apiautotest] [client.py (send:29) - 接口json: None]
2025-01-13 15:48:44,449 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:48:44,449 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:48:44,718 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:48:44,718 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":422,"msg":"成功","traceId":null}]
2025-01-13 15:48:44,718 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:48:44,718 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/auth/login]
2025-01-13 15:48:44,718 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:48:44,718 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json', 'tenant-id': '422'}]
2025-01-13 15:48:44,718 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
: 200]
2025-01-13 15:48:44,718 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:48:44,718 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":421,"msg":"成功","traceId":null}]
2025-01-13 15:48:44,718 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'username': 'sanya', 'password': 'jt123456'}]
2025-01-13 15:48:44,719 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:48:44,719 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:48:44,719 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/auth/login]
2025-01-13 15:48:44,719 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:48:44,719 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json', 'tenant-id': '421'}]
2025-01-13 15:48:44,719 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:48:44,719 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:48:44,719 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'username': 'liyang', 'password': 'jt123456'}]
2025-01-13 15:48:44,719 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:48:44,823 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:48:44,823 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":{"userId":164,"accessToken":"098e0f8fee394bb5bd478a34bd2157ff","extendJson":"{\"tenantType\":\"1\",\"isMaster\":1,\"accountType\":3,\"tenantId\":\"422\",\"userId\":164,\"orgId\":\"1791366884432678912\",\"username\":\"sanya\"}","refreshToken":"9d41dd248a314dffaca32b223f373d1f","expiresTime":1736790523972,"tenantId":422,"tenantName":"洁小兔（三亚）智洗工厂","tenantType":1,"orgId":"1791366884432678912","accountType":3},"msg":"成功","traceId":null}]
2025-01-13 15:48:44,824 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:48:44,824 INFO [apiautotest] [conftest.py (logger_init:44) - 日志初始化成功]
2025-01-13 15:48:44,824 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":{"userId":163,"accessToken":"58dab49b04b0498c8f0dd5382bcb9773","extendJson":"{\"tenantType\":\"1\",\"isMaster\":1,\"accountType\":3,\"tenantId\":\"421\",\"userId\":163,\"orgId\":\"1791366884432678912\",\"username\":\"liyang\"}","refreshToken":"94d3a630558e431ab96dde280ba9739a","expiresTime":1736790523975,"tenantId":421,"tenantName":"洁小兔（溧阳）智洗工厂","tenantType":1,"orgId":"1791366884432678912","accountType":3},"msg":"成功","traceId":null}]
2025-01-13 15:48:44,824 INFO [apiautotest] [conftest.py (logger_init:44) - 日志初始化成功]
2025-01-13 15:48:44,825 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:48:44,825 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/tcom/school/page?pageNo=1&pageSize=20]
2025-01-13 15:48:44,825 DEBUG [apiautotest] [client.py (send:25) - 接口method: get]
2025-01-13 15:48:44,825 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Authorization': 'Bearer  58dab49b04b0498c8f0dd5382bcb9773', 'tenant-id': '', 'Content-Type': 'application/json'}]
2025-01-13 15:48:44,825 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:48:44,825 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:48:44,826 DEBUG [apiautotest] [client.py (send:29) - 接口json: None]
2025-01-13 15:48:44,826 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:48:45,026 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:48:45,026 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":{"list":[{"id":"1844631397684350976","orgId":"1791366884432678912","schoolName":"溧阳市溧城初级中学","schoolType":1,"verifyType":0,"isHaveCard":2,"servceId":null,"servceName":null,"schoolAddress":"溧阳中学","schoolLonLat":"119.470767,31.419415","schoolRemark":"","createTime":1728629371000,"orgName":"洁兔组织","tenantName":"洁小兔（溧阳）智洗工厂","updater":"foshan","updateTime":1731375633000,"thirdpartySchoolId":null},{"id":"1844629742133841920","orgId":"1791366884432678912","schoolName":"溧阳市实验初级中学","schoolType":1,"verifyType":1,"isHaveCard":1,"servceId":"1844629524449464320","servceName":"一卡通服务商","schoolAddress":"江苏省常州市溧阳市平陵中路251号溧阳市实验初级中学","schoolLonLat":"119.489456,31.421294","schoolRemark":"","createTime":1728628977000,"orgName":"洁兔组织","tenantName":"洁小兔（溧阳）智洗工厂","updater":"liyang","updateTime":1732679343000,"thirdpartySchoolId":"83921"},{"id":"1844629385383120896","orgId":"1791366884432678912","schoolName":"溧阳市第六中学","schoolType":2,"verifyType":0,"isHaveCard":2,"servceId":null,"servceName":null,"schoolAddress":"江苏省常州市溧阳市永定路666号江苏省溧阳中学","schoolLonLat":"119.470767,31.419415","schoolRemark":"","createTime":1728628892000,"orgName":"洁兔组织","tenantName":"洁小兔（溧阳）智洗工厂","updater":"foshan","updateTime":1731375500000,"thirdpartySchoolId":null},{"id":"1844629246220308480","orgId":"1791366884432678912","schoolName":"溧阳中学","schoolType":2,"verifyType":0,"isHaveCard":2,"servceId":null,"servceName":null,"schoolAddress":"江苏省常州市溧阳市永定路666号江苏省溧阳中学","schoolLonLat":"119.470767,31.419415","schoolRemark":"","createTime":1728628859000,"orgName":"洁兔组织","tenantName":"洁小兔（溧阳）智洗工厂","updater":"foshan","updateTime":1731375460000,"thirdpartySchoolId":null},{"id":"1844629154864173056","orgId":"1791366884432678912","schoolName":"溧阳市燕山中学","schoolType":2,"verifyType":0,"isHaveCard":2,"servceId":null,"servceName":null,"schoolAddress":"江苏省常州市溧阳市溧城镇南环路35号溧阳市燕山中学","schoolLonLat":"119.483677,31.413099","schoolRemark":"","createTime":1728628837000,"orgName":"洁兔组织","tenantName":"洁小兔（溧阳）智洗工厂","updater":"foshan","updateTime":1731375409000,"thirdpartySchoolId":null}],"total":5},"msg":"成功","traceId":null}]
2025-01-13 15:48:45,127 INFO [apiautotest] [test_002-add_school.py (test_add_school:41) - 数据库中已有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}]]
2025-01-13 15:48:45,128 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:48:45,128 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/tcom/school/create]
2025-01-13 15:48:45,128 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:48:45,128 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Authorization': 'Bearer  098e0f8fee394bb5bd478a34bd2157ff', 'tenant-id': '', 'Content-Type': 'application/json'}]
2025-01-13 15:48:45,128 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:48:45,128 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:48:45,128 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'schoolName': '测试学校', 'schoolType': 1, 'isHaveCard': 2, 'schoolAddress': '浙江省杭州市拱墅区石桥路与永华街交叉口滨江·春语蓝庭', 'schoolLonLat': '120.188966,30.346182'}]
2025-01-13 15:48:45,128 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:48:45,202 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:48:45,202 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":"1878710758926323712","msg":"成功","traceId":null}]
2025-01-13 15:48:45,283 INFO [apiautotest] [test_002-add_school.py (test_add_school:47) - 测试完成后数据库中有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}]]
2025-01-13 15:48:45,284 INFO [apiautotest] [test_002-add_school.py (test_add_school:52) - 删除测试数据sql：delete from tcom_school where school_name = "测试学校" and tenant_id = 422 and create_time >= "2025-01-13 15:48:45"]
2025-01-13 15:48:45,724 INFO [apiautotest] [test_002-add_school.py (test_add_school:41) - 数据库中已有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}]]
2025-01-13 15:48:45,725 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:48:45,725 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/tcom/school/create]
2025-01-13 15:48:45,725 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:48:45,725 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Authorization': 'Bearer  098e0f8fee394bb5bd478a34bd2157ff', 'tenant-id': '', 'Content-Type': 'application/json'}]
2025-01-13 15:48:45,725 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:48:45,726 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:48:45,726 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'schoolName': '', 'schoolType': 1, 'isHaveCard': 2, 'schoolAddress': '浙江省杭州市拱墅区石桥路与永华街交叉口滨江·春语蓝庭', 'schoolLonLat': '120.188966,30.346182'}]
2025-01-13 15:48:45,726 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:48:45,780 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:48:45,780 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":400,"data":null,"msg":"请求参数不正确:学校名称不能为空","traceId":null}]
2025-01-13 15:48:45,856 INFO [apiautotest] [test_002-add_school.py (test_add_school:47) - 测试完成后数据库中有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}]]
2025-01-13 15:48:45,945 INFO [apiautotest] [test_002-add_school.py (test_add_school:41) - 数据库中已有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}]]
2025-01-13 15:48:45,946 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:48:45,946 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/tcom/school/create]
2025-01-13 15:48:45,947 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:48:45,947 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Authorization': 'Bearer  098e0f8fee394bb5bd478a34bd2157ff', 'tenant-id': '', 'Content-Type': 'application/json'}]
2025-01-13 15:48:45,947 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:48:45,948 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:48:45,948 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'schoolName': '测试学校2', 'schoolType': 1, 'isHaveCard': 2, 'schoolAddress': '', 'schoolLonLat': '120.188966,30.346182'}]
2025-01-13 15:48:45,948 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:48:45,998 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:48:45,998 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":400,"data":null,"msg":"请求参数不正确:学校地址不能为空","traceId":null}]
2025-01-13 15:48:46,066 INFO [apiautotest] [test_002-add_school.py (test_add_school:47) - 测试完成后数据库中有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}]]
2025-01-13 15:48:46,152 INFO [apiautotest] [test_002-add_school.py (test_add_school:41) - 数据库中已有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}]]
2025-01-13 15:48:46,153 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:48:46,153 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/tcom/school/create]
2025-01-13 15:48:46,153 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:48:46,153 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Authorization': 'Bearer  098e0f8fee394bb5bd478a34bd2157ff', 'tenant-id': '', 'Content-Type': 'application/json'}]
2025-01-13 15:48:46,153 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:48:46,153 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:48:46,153 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'schoolName': '测试学校3', 'schoolType': 1, 'isHaveCard': 2, 'schoolAddress': '浙江省杭州市拱墅区石桥路与永华街交叉口滨江·春语蓝庭', 'schoolLonLat': ''}]
2025-01-13 15:48:46,153 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:48:46,200 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:48:46,200 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":400,"data":null,"msg":"请求参数不正确:经纬度不能为空","traceId":null}]
2025-01-13 15:48:46,262 INFO [apiautotest] [test_002-add_school.py (test_add_school:47) - 测试完成后数据库中有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}]]
2025-01-13 15:52:33,450 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:52:33,451 DEBUG [apiautotest] [client.py (send:23) - =================================================]
system/tenant/get-id-by-name?name=liyang]
2025-01-13 15:52:33,451 DEBUG [apiautotest] [client.py (send:25) - 接口method: get]
2025-01-13 15:52:33,451 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json'}]
2025-01-13 15:52:33,451 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/tenant/get-id-by-name?name=sanya]
2025-01-13 15:52:33,451 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:52:33,451 DEBUG [apiautotest] [client.py (send:25) - 接口method: get]
2025-01-13 15:52:33,451 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:52:33,451 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json'}]
2025-01-13 15:52:33,451 DEBUG [apiautotest] [client.py (send:29) - 接口json: None]
2025-01-13 15:52:33,451 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:52:33,451 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:52:33,451 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:52:33,451 DEBUG [apiautotest] [client.py (send:29) - 接口json: None]
2025-01-13 15:52:33,452 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:52:33,912 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:52:33,912 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":421,"msg":"成功","traceId":null}]
2025-01-13 15:52:33,912 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:52:33,912 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/auth/login]
2025-01-13 15:52:33,914 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:52:33,914 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json', 'tenant-id': '421'}]
2025-01-13 15:52:33,914 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:52:33,914 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:52:33,914 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'username': 'liyang', 'password': 'jt123456'}]
2025-01-13 15:52:33,914 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:52:33,924 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:52:33,924 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":422,"msg":"成功","traceId":null}]
2025-01-13 15:52:33,924 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:52:33,924 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/system/auth/login]
2025-01-13 15:52:33,924 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:52:33,924 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Content-Type': 'application/json', 'tenant-id': '422'}]
2025-01-13 15:52:33,924 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:52:33,924 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:52:33,924 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'username': 'sanya', 'password': 'jt123456'}]
2025-01-13 15:52:33,924 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:52:34,011 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:52:34,012 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":{"userId":163,"accessToken":"29b3c836b4d34b2eae326f257c1f8146","extendJson":"{\"tenantType\":\"1\",\"isMaster\":1,\"accountType\":3,\"tenantId\":\"421\",\"userId\":163,\"orgId\":\"1791366884432678912\",\"username\":\"liyang\"}","refreshToken":"337a6e1e9ec24121954799297df0f675","expiresTime":1736790753162,"tenantId":421,"tenantName":"洁小兔（溧阳）智洗工厂","tenantType":1,"orgId":"1791366884432678912","accountType":3},"msg":"成功","traceId":null}]
2025-01-13 15:52:34,012 INFO [apiautotest] [conftest.py (logger_init:44) - 日志初始化成功]
2025-01-13 15:52:34,014 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:52:34,015 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/tcom/school/page?pageNo=1&pageSize=20]
2025-01-13 15:52:34,015 DEBUG [apiautotest] [client.py (send:25) - 接口method: get]
2025-01-13 15:52:34,015 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Authorization': 'Bearer  29b3c836b4d34b2eae326f257c1f8146', 'tenant-id': '', 'Content-Type': 'application/json'}]
2025-01-13 15:52:34,016 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:52:34,016 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:52:34,016 DEBUG [apiautotest] [client.py (send:29) - 接口json: None]
2025-01-13 15:52:34,016 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:52:34,020 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:52:34,020 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":{"userId":164,"accessToken":"422aaabcdb6d4df59d8e81d90267b124","extendJson":"{\"tenantType\":\"1\",\"isMaster\":1,\"accountType\":3,\"tenantId\":\"422\",\"userId\":164,\"orgId\":\"1791366884432678912\",\"username\":\"sanya\"}","refreshToken":"e551dc853e804b749fefd900f30d9250","expiresTime":1736790753171,"tenantId":422,"tenantName":"洁小兔（三亚）智洗工厂","tenantType":1,"orgId":"1791366884432678912","accountType":3},"msg":"成功","traceId":null}]
2025-01-13 15:52:34,021 INFO [apiautotest] [conftest.py (logger_init:44) - 日志初始化成功]
2025-01-13 15:52:34,193 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:52:34,193 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":{"list":[{"id":"1844631397684350976","orgId":"1791366884432678912","schoolName":"溧阳市溧城初级中学","schoolType":1,"verifyType":0,"isHaveCard":2,"servceId":null,"servceName":null,"schoolAddress":"溧阳中学","schoolLonLat":"119.470767,31.419415","schoolRemark":"","createTime":1728629371000,"orgName":"洁兔组织","tenantName":"洁小兔（溧阳）智洗工厂","updater":"foshan","updateTime":1731375633000,"thirdpartySchoolId":null},{"id":"1844629742133841920","orgId":"1791366884432678912","schoolName":"溧阳市实验初级中学","schoolType":1,"verifyType":1,"isHaveCard":1,"servceId":"1844629524449464320","servceName":"一卡通服务商","schoolAddress":"江苏省常州市溧阳市平陵中路251号溧阳市实验初级中学","schoolLonLat":"119.489456,31.421294","schoolRemark":"","createTime":1728628977000,"orgName":"洁兔组织","tenantName":"洁小兔（溧阳）智洗工厂","updater":"liyang","updateTime":1732679343000,"thirdpartySchoolId":"83921"},{"id":"1844629385383120896","orgId":"1791366884432678912","schoolName":"溧阳市第六中学","schoolType":2,"verifyType":0,"isHaveCard":2,"servceId":null,"servceName":null,"schoolAddress":"江苏省常州市溧阳市永定路666号江苏省溧阳中学","schoolLonLat":"119.470767,31.419415","schoolRemark":"","createTime":1728628892000,"orgName":"洁兔组织","tenantName":"洁小兔（溧阳）智洗工厂","updater":"foshan","updateTime":1731375500000,"thirdpartySchoolId":null},{"id":"1844629246220308480","orgId":"1791366884432678912","schoolName":"溧阳中学","schoolType":2,"verifyType":0,"isHaveCard":2,"servceId":null,"servceName":null,"schoolAddress":"江苏省常州市溧阳市永定路666号江苏省溧阳中学","schoolLonLat":"119.470767,31.419415","schoolRemark":"","createTime":1728628859000,"orgName":"洁兔组织","tenantName":"洁小兔（溧阳）智洗工厂","updater":"foshan","updateTime":1731375460000,"thirdpartySchoolId":null},{"id":"1844629154864173056","orgId":"1791366884432678912","schoolName":"溧阳市燕山中学","schoolType":2,"verifyType":0,"isHaveCard":2,"servceId":null,"servceName":null,"schoolAddress":"江苏省常州市溧阳市溧城镇南环路35号溧阳市燕山中学","schoolLonLat":"119.483677,31.413099","schoolRemark":"","createTime":1728628837000,"orgName":"洁兔组织","tenantName":"洁小兔（溧阳）智洗工厂","updater":"foshan","updateTime":1731375409000,"thirdpartySchoolId":null}],"total":5},"msg":"成功","traceId":null}]
2025-01-13 15:52:34,244 INFO [apiautotest] [test_002-add_school.py (test_add_school:41) - 数据库中已有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}]]
2025-01-13 15:52:34,245 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:52:34,245 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/tcom/school/create]
2025-01-13 15:52:34,245 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:52:34,245 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Authorization': 'Bearer  422aaabcdb6d4df59d8e81d90267b124', 'tenant-id': '', 'Content-Type': 'application/json'}]
2025-01-13 15:52:34,245 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:52:34,245 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:52:34,245 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'schoolName': '测试学校', 'schoolType': 1, 'isHaveCard': 2, 'schoolAddress': '浙江省杭州市拱墅区石桥路与永华街交叉口滨江·春语蓝庭', 'schoolLonLat': '120.188966,30.346182'}]
2025-01-13 15:52:34,245 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:52:34,323 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:52:34,323 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":0,"data":"1878711719937839104","msg":"成功","traceId":null}]
2025-01-13 15:52:34,385 INFO [apiautotest] [test_002-add_school.py (test_add_school:47) - 测试完成后数据库中有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}, {'school_name': '测试学校'}]]
2025-01-13 15:52:34,385 INFO [apiautotest] [test_002-add_school.py (test_add_school:52) - 删除测试数据sql：delete from tcom_school where school_name = "测试学校" and tenant_id = 422 and create_time >= "2025-01-13 15:52:34"]
2025-01-13 15:52:34,834 INFO [apiautotest] [test_002-add_school.py (test_add_school:41) - 数据库中已有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}, {'school_name': '测试学校'}]]
2025-01-13 15:52:34,834 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:52:34,834 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/tcom/school/create]
2025-01-13 15:52:34,834 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:52:34,834 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Authorization': 'Bearer  422aaabcdb6d4df59d8e81d90267b124', 'tenant-id': '', 'Content-Type': 'application/json'}]
2025-01-13 15:52:34,834 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:52:34,835 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:52:34,835 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'schoolName': '', 'schoolType': 1, 'isHaveCard': 2, 'schoolAddress': '浙江省杭州市拱墅区石桥路与永华街交叉口滨江·春语蓝庭', 'schoolLonLat': '120.188966,30.346182'}]
2025-01-13 15:52:34,835 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:52:34,897 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:52:34,897 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":400,"data":null,"msg":"请求参数不正确:学校名称不能为空","traceId":null}]
2025-01-13 15:52:34,965 INFO [apiautotest] [test_002-add_school.py (test_add_school:47) - 测试完成后数据库中有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}, {'school_name': '测试学校'}]]
2025-01-13 15:52:35,051 INFO [apiautotest] [test_002-add_school.py (test_add_school:41) - 数据库中已有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}, {'school_name': '测试学校'}]]
2025-01-13 15:52:35,051 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:52:35,051 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/tcom/school/create]
2025-01-13 15:52:35,051 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:52:35,051 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Authorization': 'Bearer  422aaabcdb6d4df59d8e81d90267b124', 'tenant-id': '', 'Content-Type': 'application/json'}]
2025-01-13 15:52:35,051 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:52:35,051 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:52:35,051 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'schoolName': '测试学校2', 'schoolType': 1, 'isHaveCard': 2, 'schoolAddress': '', 'schoolLonLat': '120.188966,30.346182'}]
2025-01-13 15:52:35,052 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:52:35,100 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:52:35,100 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":400,"data":null,"msg":"请求参数不正确:学校地址不能为空","traceId":null}]
2025-01-13 15:52:35,161 INFO [apiautotest] [test_002-add_school.py (test_add_school:47) - 测试完成后数据库中有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}, {'school_name': '测试学校'}]]
2025-01-13 15:52:35,275 INFO [apiautotest] [test_002-add_school.py (test_add_school:41) - 数据库中已有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}, {'school_name': '测试学校'}]]
2025-01-13 15:52:35,275 DEBUG [apiautotest] [client.py (send:23) - =================================================]
2025-01-13 15:52:35,276 DEBUG [apiautotest] [client.py (send:24) - 接口url: https://admin.test.jietukj.com/admin-api/tcom/school/create]
2025-01-13 15:52:35,276 DEBUG [apiautotest] [client.py (send:25) - 接口method: post]
2025-01-13 15:52:35,276 DEBUG [apiautotest] [client.py (send:26) - 接口headers: {'Authorization': 'Bearer  422aaabcdb6d4df59d8e81d90267b124', 'tenant-id': '', 'Content-Type': 'application/json'}]
2025-01-13 15:52:35,276 DEBUG [apiautotest] [client.py (send:27) - 接口params: None]
2025-01-13 15:52:35,276 DEBUG [apiautotest] [client.py (send:28) - 接口data: None]
2025-01-13 15:52:35,276 DEBUG [apiautotest] [client.py (send:29) - 接口json: {'schoolName': '测试学校3', 'schoolType': 1, 'isHaveCard': 2, 'schoolAddress': '浙江省杭州市拱墅区石桥路与永华街交叉口滨江·春语蓝庭', 'schoolLonLat': ''}]
2025-01-13 15:52:35,276 DEBUG [apiautotest] [client.py (send:30) - 接口files: None]
2025-01-13 15:52:35,330 DEBUG [apiautotest] [client.py (send:42) - 接口响应状态码: 200]
2025-01-13 15:52:35,330 DEBUG [apiautotest] [client.py (send:43) - 接口响应body: {"code":400,"data":null,"msg":"请求参数不正确:经纬度不能为空","traceId":null}]
2025-01-13 15:52:35,400 INFO [apiautotest] [test_002-add_school.py (test_add_school:47) - 测试完成后数据库中有的学校名称：[{'school_name': '三亚双品学校'}, {'school_name': '人大附中三亚学校'}, {'school_name': '三亚理工职业学校'}, {'school_name': '测试学校'}, {'school_name': '测试学校'}]]
